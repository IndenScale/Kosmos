# Kosmos V2 前端重构计划

## 重构目标

1. **移除过时概念**
   - 删除 `ingest` 等混杂了解析与索引的含混概念
   - 建立清晰的心智模型：文档上传 → 解析 → 索引 → 搜索

2. **技术栈保持**
   - React 18 + TypeScript
   - Vite + Tailwind CSS  
   - Ant Design + Zustand
   - React Query

3. **重构原则**
   - 先注释掉当前组件
   - 逐步集成页面与组件
   - 删除过时代码

## 重构进度

### ✅ 已完成

- [x] 创建空白页面 (`App.tsx`)
- [x] 注释掉所有V1路由和组件
- [x] 建立V2基础架构

### 🚧 进行中

- [ ] 重新设计页面结构
- [ ] 重构核心概念模型

### 📋 待完成

#### 1. 核心概念重构
- [ ] 用户认证系统
- [ ] 知识库管理
- [ ] 文档管理（上传、解析）
- [ ] 索引管理
- [ ] 语义搜索

#### 2. 页面结构重新设计
- [ ] 登录/注册页面
- [ ] 主仪表盘
- [ ] 知识库列表页
- [ ] 知识库详情页
- [ ] 文档管理页面
- [ ] 搜索结果页面

#### 3. 组件重构
- [ ] 布局组件 (`Layout`)
- [ ] 导航组件
- [ ] 表格组件
- [ ] 表单组件
- [ ] 搜索组件

#### 4. 状态管理重构
- [ ] 认证状态 (`authStore`)
- [ ] 知识库状态
- [ ] 文档状态
- [ ] 搜索状态

#### 5. API服务重构
- [ ] 认证服务
- [ ] 知识库服务
- [ ] 文档服务
- [ ] 搜索服务

## 新的心智模型

### 核心流程
```
用户 → 知识库 → 文档上传 → 文档解析 → 内容索引 → 语义搜索
```

### 概念映射
- ~~`ingest`~~ → `文档上传` + `文档解析`
- `fragment` → `文档片段`
- `index` → `内容索引`
- `search` → `语义搜索`

## 目录结构规划

```
frontend/src/
├── components/           # 通用组件
│   ├── layout/          # 布局组件
│   ├── forms/           # 表单组件
│   ├── tables/          # 表格组件
│   └── search/          # 搜索组件
├── pages/               # 页面组件
│   ├── auth/            # 认证页面
│   ├── dashboard/       # 仪表盘
│   ├── knowledge-base/  # 知识库页面
│   ├── documents/       # 文档管理页面
│   └── search/          # 搜索页面
├── services/            # API服务
├── stores/              # 状态管理
├── types/               # TypeScript类型
├── utils/               # 工具函数
└── styles/              # 样式文件
```

## 下一步行动

1. 启动前端开发服务器，确认空白页面正常显示
2. 重构认证系统
3. 重构知识库管理
4. 逐步集成其他功能模块